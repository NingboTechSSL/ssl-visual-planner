#ifndef KKPOPLANSQL_H
#define KKPOPLANSQL_H

#include "base.h"

#include <QtSql/QSql>
#include <QtSql/QSqlDatabase>
#include <QtSql/QSqlQuery>
#include <QList>
#include <QDebug>
#include <QMessageBox>
#include <QtSql/QSqlError>

struct planStruct {
    QList<playOffRobot> AgentPlan[6];
    POMODE planMode;
    int agentSize;
    POInitPos initPos;
};

class kkPOPlanSQL
{
public:
    kkPOPlanSQL(QString directory);
    ~kkPOPlanSQL();

    bool changeSQLDir(QString directory);
    void savePlan();

    QList<planStruct> planList;

    int addPlan(QList<playOffRobot> tPlan[6], POInitPos tInitPos, POMODE tPOMode, int agentSize, int itemId = -1);

    int findMaxSteps(planStruct &_plan);
    void addEachPlanToSql(planStruct _plan, QString tName);
    void addStepToSql(QString tName, int tid,
                      QList<playOffRobot> &tA1,
                      QList<playOffRobot> &tA2,
                      QList<playOffRobot> &tA3,
                      QList<playOffRobot> &tA4,
                      QList<playOffRobot> &tA5,
                      QList<playOffRobot> &tA6);
    QString convertStructToSQLCmd(int _agentId, playOffRobot tStep);
    QString convertEmptyStructToSQLCmd(int _agentId);
    QSqlDatabase planSQL;

    void disableSQL();
    void enableSQL();
};

#endif // KKPOPLANSQL_H
